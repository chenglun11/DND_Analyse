# Accessibility规则文档

## 概述

Accessibility规则已更新为使用**0权重客观评分方法**，完全基于数学原理，无任何主观权重。

## 设计理念

### 客观性
- 完全基于图论和网络科学原理
- 无主观权重分配
- 使用几何平均融合，确保所有子指标平等贡献

### 子指标

#### 1. Reachability Ratio（可达率）
- **定义**: 最大连通组件节点数 / 总节点数
- **范围**: [0, 1]
- **意义**: 衡量地图的整体连通性

#### 2. Normalized Average Path Length（归一化平均路径长度）
- **定义**: (直径 - 平均路径长度) / 直径
- **范围**: [0, 1]
- **意义**: 衡量从入口到各房间的平均可达性

#### 3. Normalized Path Variance（归一化路径方差）
- **定义**: 1 - (路径方差 / 直径²)
- **范围**: [0, 1]
- **意义**: 衡量路径长度的均匀性

### 融合方法

使用**几何平均**融合三个子指标：

```
score = exp(mean(log(factors)))
```

其中`factors`为所有非零子指标。

## 技术实现

### 核心算法

1. **BFS连通性分析**
   - 计算最大连通组件大小
   - 确定可达率

2. **最短路径计算**
   - 从入口房间开始BFS
   - 计算到所有可达节点的最短路径长度

3. **统计归一化**
   - 基于图的直径进行归一化
   - 确保所有指标在[0,1]范围内

### 代码结构

```python
class AccessibilityRule(BaseQualityRule):
    def evaluate(self, dungeon_data):
        # 1. 构建图结构
        # 2. 计算可达率
        # 3. 计算路径统计
        # 4. 归一化处理
        # 5. 几何平均融合
        return score, details
```

## 权重设置

- **当前权重**: 0.0
- **原因**: 使用客观评分方法，不参与主观权重计算
- **影响**: 不影响整体质量评分，仅提供客观分析

## 评分示例

### 高质量地图特征
- 可达率 = 1.0（完全连通）
- 归一化平均路径长度 > 0.5（合理距离）
- 归一化路径方差 > 0.8（路径长度均匀）

### 低质量地图特征
- 可达率 < 0.8（存在孤立区域）
- 归一化平均路径长度 < 0.3（路径过长）
- 归一化路径方差 < 0.5（路径长度差异过大）

## 优势

1. **完全客观**: 无主观权重，基于纯数学原理
2. **理论严谨**: 基于图论和网络科学
3. **易于理解**: 三个子指标含义明确
4. **稳定可靠**: 几何平均确保结果稳定

## 应用场景

- 地图质量评估
- 连通性分析
- 路径优化建议
- 客观比较不同地图设计 