# 地下城适配器系统架构文档

## 文档概述

本目录包含了地下城适配器系统的完整架构文档，通过四张核心架构图详细展示了系统的设计理念、组件关系和数据流程。

## 文档列表

### 1. 系统架构总览 (`system_architecture_overview.md`)
- **内容**: 完整的系统架构图，包含所有组件和层次关系
- **格式**: Mermaid图表 + 详细说明
- **用途**: 理解整体系统架构和组件职责

### 2. 架构图总结 (`architecture_diagrams_summary.md`)
- **内容**: 四张核心架构图的简要说明和设计亮点
- **格式**: 文字描述 + 要点总结
- **用途**: 快速了解系统设计优势和技术特点

### 3. PlantUML架构图 (`architecture_diagrams.puml`)
- **内容**: 四张架构图的PlantUML源码
- **格式**: PlantUML代码
- **用途**: 生成高质量的可视化架构图

## 四张核心架构图

### 1. 系统架构总览图
展示整个系统的分层架构，包括：
- 用户界面层（CLI、API）
- 核心管理层（适配器管理器、质量评估器、可视化器）
- 数据转换层（适配器插件、空间推理引擎）
- 质量评估层（9个评估规则插件）
- 数据层（统一格式、源格式）

### 2. 插件适配器架构图
详细展示适配器插件的设计模式：
- 适配器管理器的核心功能
- 抽象基类的接口规范
- 具体适配器的实现
- 统一数据格式的结构

### 3. 空间推理与图模型流程图
展示空间推理引擎的工作流程：
- 输入数据处理
- 空间推理算法
- 图模型构建
- 智能识别策略
- 输出增强数据

### 4. 指标计算管道图
展示质量评估的完整流程：
- 评估器的工作机制
- 评估规则的分类和权重
- 评分计算方法
- 输出结果格式

## 如何使用这些文档

### 对于开发者
1. **新功能开发**: 参考系统架构总览图，了解组件职责
2. **适配器开发**: 参考插件适配器架构图，遵循接口规范
3. **评估规则开发**: 参考指标计算管道图，了解评估机制
4. **空间推理优化**: 参考空间推理流程图，理解算法逻辑

### 对于架构师
1. **系统设计**: 参考架构图总结，了解设计优势
2. **扩展规划**: 基于插件化架构，规划新功能
3. **性能优化**: 分析数据流程，识别优化点

### 对于用户
1. **功能理解**: 通过架构图了解系统能力
2. **使用指导**: 理解数据转换和评估流程
3. **问题定位**: 根据架构层次定位问题

## 技术特点

### 1. 插件化架构
- 支持动态加载适配器和评估规则
- 无需修改核心代码即可扩展功能
- 统一的接口规范保证一致性

### 2. 分层设计
- 清晰的职责分离
- 松耦合的组件关系
- 便于维护和测试

### 3. 智能化处理
- 空间推理自动补全信息
- 多维度质量评估
- 智能优化建议

### 4. 标准化输出
- 统一的地下城数据格式
- 标准化的评估指标
- 规范化的报告格式

## 生成图表

### 使用Mermaid
```bash
# 在支持Mermaid的Markdown编辑器中查看
# 如GitHub、GitLab、Typora等
```

### 使用PlantUML
```bash
# 安装PlantUML
# 生成PNG图片
plantuml -tpng architecture_diagrams.puml

# 生成SVG图片
plantuml -tsvg architecture_diagrams.puml
```

## 维护说明

### 更新架构图
1. 修改对应的Markdown文件中的Mermaid代码
2. 同步更新PlantUML文件
3. 更新架构图总结文档
4. 确保图表的一致性

### 版本控制
- 架构图的重大变更需要记录在版本历史中
- 保持文档与实际代码的同步
- 定期审查架构图的准确性

## 联系信息

如有架构相关问题或建议，请通过以下方式联系：
- 项目Issues: [GitHub Issues链接]
- 文档改进: 提交Pull Request
- 技术讨论: 项目Wiki页面 